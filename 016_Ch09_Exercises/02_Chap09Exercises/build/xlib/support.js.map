{"version":3,"sources":["../../src/xlib/support.js"],"names":[],"mappings":"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","file":"support.js","sourcesContent":["/*\r\nPartial excerpt from 'support.js', Professor Frisby's functional programming e-book.\r\nSource Code Repo = https://github.com/MostlyAdequate/mostly-adequate-guide.git\r\n\r\n */\r\n\r\nexport let __hotReload = true;\r\n\r\nimport _ from 'ramda';\r\nimport {Task} from 'folktale/data';\r\nimport {monads} from 'folktale/control';\r\n\r\n\r\nexport var Left = function(x) {\r\n    this.__value = x;\r\n};\r\n\r\n// TODO: remove this nonsense\r\nLeft.of = function(x) {\r\n    return new Left(x);\r\n};\r\n\r\nLeft.prototype.map = function(f) { return this; }\r\nLeft.prototype.ap = function(other) { return this; }\r\nLeft.prototype.join = function() { return this; }\r\nLeft.prototype.chain = function() { return this; }\r\nLeft.prototype.inspect = function() {\r\n    return 'Left('+inspect(this.__value)+')';\r\n};\r\n\r\n\r\nexport var Right = function(x) {\r\n    this.__value = x;\r\n};\r\n\r\n// TODO: remove in favor of Either.of\r\nRight.of = function(x) {\r\n    return new Right(x);\r\n};\r\n\r\nRight.prototype.map = function(f) {\r\n    return Right.of(f(this.__value));\r\n};\r\n\r\nRight.prototype.join = function() {\r\n    return this.__value;\r\n};\r\n\r\nRight.prototype.chain = function(f) {\r\n    return f(this.__value);\r\n};\r\n\r\nRight.prototype.ap = function(other) {\r\n    return this.chain(function(f) {\r\n        return other.map(f);\r\n    });\r\n};\r\n\r\nRight.prototype.join = function() {\r\n    return this.__value;\r\n};\r\n\r\nRight.prototype.chain = function(f) {\r\n    return f(this.__value);\r\n};\r\n\r\nRight.prototype.inspect = function() {\r\n    return 'Right('+inspect(this.__value)+')';\r\n};\r\n\r\n\r\nexport var split = _.curry(function(what, x) {\r\n    return x.split(what);\r\n});\r\n\r\nexport var inspect = function(x) {\r\n    return (x && x.inspect) ? x.inspect() : x;\r\n};\r\n\r\n// IO\r\nexport var IO = function(f) {\r\n    this.unsafePerformIO = f;\r\n};\r\n\r\nIO.of = function(x) {\r\n    return new IO(function() {\r\n        return x;\r\n    });\r\n};\r\n\r\nIO.prototype.map = function(f) {\r\n    return new IO(_.compose(f, this.unsafePerformIO));\r\n};\r\n\r\nIO.prototype.join = function() {\r\n    return this.unsafePerformIO();\r\n};\r\n\r\nIO.prototype.chain = function(f) {\r\n    return this.map(f).join();\r\n};\r\n\r\nIO.prototype.ap = function(a) {\r\n    return this.chain(function(f) {\r\n        return a.map(f);\r\n    });\r\n};\r\n\r\nIO.prototype.inspect = function() {\r\n    return 'IO('+inspect(this.unsafePerformIO)+')';\r\n};\r\n\r\nexport var unsafePerformIO = function(x) { return x.unsafePerformIO(); };\r\n\r\nexport var join = function(m){ return m.join(); };\r\n\r\n//export var chain = curry(function(f, m){\r\n//    return m.map(f).join(); // or compose(join, map(f))(m)\r\n//});\r\n\r\n//  chain :: Monad m => (a -> m b) -> m a -> m b\r\nexport var chain = _.curry(function(f, m){\r\n    return  _.compose(monads.join, _.map(f))(m) ; // or m.map(f).join()\r\n});\r\n\r\nTask.prototype.join = function(){ return this.chain(_.identity); };\r\n\r\n\r\nexport var either = _.curry(function(f, g, e) {\r\n    switch(e.constructor) {\r\n        case Left: return f(e.__value);\r\n        case Right: return g(e.__value);\r\n    }\r\n});\r\n\r\n\r\n/* Alternative Exercise 4 */\r\n// IO\r\nexport var IO2 = function(f) {\r\n    this.unsafePerformIO = f;\r\n};\r\n\r\nIO2.of = function(x) {\r\n    return new IO2(function() {\r\n        return x;\r\n    });\r\n};\r\n\r\nIO2.prototype.map = function(f) {\r\n    return new IO2(_.compose(f, this.unsafePerformIO));\r\n};\r\n\r\nIO2.prototype.get = function(){\r\n    return this.unsafePerformIO();\r\n}\r\n\r\nIO2.prototype.join = function() {\r\n    return this.unsafePerformIO();\r\n};\r\n\r\nIO2.prototype.chain = function(f) {\r\n    return this.map(f).join();\r\n};\r\n\r\nIO2.prototype.ap = function(a) {\r\n    return this.chain(function(f) {\r\n        return a.map(f);\r\n    });\r\n};\r\n\r\nIO2.prototype.inspect = function() {\r\n    return 'IO('+inspect(this.unsafePerformIO)+')';\r\n};\r\n\r\n"]}