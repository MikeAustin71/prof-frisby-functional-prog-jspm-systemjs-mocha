{"version":3,"sources":["../../src/xlib/ExLib2.js"],"names":[],"mappings":"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","file":"ExLib2.js","sourcesContent":["/**\r\n * Created by mike10 on 12/21/2015.\r\n */\r\n\r\nexport let __hotReload = true;\r\n\r\nimport _ from 'ramda';\r\nimport {Either,Maybe,Task} from 'folktale/data';\r\nimport {monads} from 'folktale/control';\r\nimport * as S from './support.js';\r\n\r\n// Exercise 1\r\n// ==========\r\n// Use safeProp and map/join or chain to safely get the street name when given\r\n// a user\r\n\r\nexport var safeProp = _.curry(function (x, o) { return Maybe.of(o[x]); });\r\n\r\nexport var ex1_1 = _.compose(monads.join,_.map(safeProp('name')), monads.join, _.map(safeProp('street')), safeProp('address'));\r\n\r\n\r\n\r\nexport var ex1_2 = _.compose(S.chain(safeProp('name')), S.chain(safeProp('street')), safeProp('address'));\r\n\r\n// Exercise 2\r\n// ==========\r\n// Use getFile to get the filename, remove the directory so it's just the file,\r\n// then purely log it.\r\n\r\n// Note: IO is located in support.js\r\n\r\nexport var getFile = function() {\r\n    return new S.IO(function(){ return __filename; });\r\n};\r\n\r\nexport var pureLog = function(x) {\r\n    return new S.IO(function(){\r\n        console.log(x);\r\n        return 'logged ' + x; // for testing w/o mocks\r\n    });\r\n};\r\n\r\nexport var ex2_1 = _.compose(S.chain(_.compose(pureLog, _.last, S.split('/'))), getFile);\r\n\r\n// Exercise 3\r\n// ==========\r\n// Use getPost() then pass the post's id to getComments().\r\n//\r\n\r\nvar getPost = function(i) {\r\n    return new Task(function (rej, res) {\r\n        setTimeout(function () {\r\n            res({ id: i, title: 'Love them tasks' });\r\n        }, 300);\r\n    });\r\n};\r\nvar getComments = function(i) {\r\n    return new Task(function (rej, res) {\r\n        setTimeout(function () {\r\n            res([\r\n                {post_id: i, body: \"This book should be illegal\"},\r\n                {post_id: i, body: \"Monads are like smelly shallots\"}\r\n            ]);\r\n        }, 300);\r\n    });\r\n};\r\n\r\nexport var ex3_1 = _.compose(S.chain(_.compose(getComments, _.prop('id'))), getPost);\r\n\r\n// Exercise 4\r\n// ==========\r\n// Use validateEmail, addToMailingList, and emailBlast to implement ex4's type\r\n// signature.\r\n\r\n//  addToMailingList :: Email -> IO([Email])\r\nvar addToMailingList = (function(list){\r\n    return function(email) {\r\n        return new S.IO(function(){\r\n            list.push(email);\r\n            return list;\r\n        });\r\n    }\r\n})([]);\r\n\r\nfunction emailBlast(list) {\r\n    return new S.IO(function(){\r\n        return 'emailed: ' + list.join(',');\r\n    });\r\n}\r\n\r\nvar validateEmail = function(x){\r\n    return x.match(/\\S+@\\S+\\.\\S+/) ? (new S.Right(x)) : (new S.Left('invalid email'));\r\n};\r\n\r\n// Note modified from original 'getResult' for Chapter 9 Exercises.\r\n// Original: var getResult = either(_.identity, unsafePerformIO);\r\n\r\nexport var getResult = _.curry(S.either(_.identity, _.__));\r\n\r\n//_.compose(S.chain(_.compose(emailBlast,addToMailingList),validateEmail));\r\nexport var ex4_1 = _.compose(_.map(_.compose(S.chain(emailBlast), addToMailingList)), validateEmail);\r\n\r\n// Exercise 4 Alternative ex4_2\r\n/*\r\n export var getResult2 = _.curry(Either(_.identity, _.__));\r\n\r\n function emailBlast2(list) {\r\n return new S.IO2(function(){\r\n return 'emailed: ' + list.join(',');\r\n });\r\n }\r\n\r\n var validateEmail2 = function(x){\r\n return x.match(/\\S+@\\S+\\.\\S+/) ? (Either.Right(x)) : (new Either.Left('invalid email'));\r\n };\r\n\r\n var addToMailingList2 = (function(list){\r\n return function(email) {\r\n return new S.IO2(function(){\r\n list.push(email);\r\n return list;\r\n });\r\n }\r\n })([]);\r\n\r\n export var ex4_2 = _.compose(_.map(_.compose(S.chain(emailBlast2), addToMailingList2)), validateEmail2);\r\n */"]}